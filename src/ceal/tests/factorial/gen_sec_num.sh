#!/bin/sh

if [ $# -ne 3 ]; then
    echo Usage: "$0" PQ beta num_to_encypt
    exit
fi

PQ="$1"
beta="$2"
num="$3"

if [ $PQ=239.251 ]; then
    Nbits=16
elif [ $PQ=63199.64567 ]; then
    Nbits=32
elif [ $PQ=4281167959.4271299633 ]; then
    Nbits=64
elif [ $PQ=18299379327617480707.18345258783657292909 ]; then
    Nbits=128
elif [ $PQ=338871469111127928412308213206819656391.338531414912581056934822037249894061881 ]; then
    Nbits=256
elif [ $PQ=115689526107095890311249333520175779978137070980169508677335528535095435701957.115509443392406915656501893779637949187966713758992043305916442498716409678501 ]; then
    Nbits=512
elif [ $PQ=13392849694255970315601419090152597688339809774933571293865724091737666496951381207429127235940384883608845778583380210687006370486238723021460371010217257.13403952390292880134486926689236901739298695038033079040680862117777593853851234125818128702776151240584166261477766002390185782669746209391687589482784501]; then
    Nbits=1024
fi

echo "../../_bin_unx/ceal -p \"k=5 r=17 beta=$beta PQ=$PQ\" -c xenc @$num"
res="$(../../_bin_unx/ceal -p "k=5 r=17 beta=$beta PQ=$PQ" -c xenc @$num)"

echo $res
echo $res > "input"$num"_N"$Nbits"_b"$beta".out"

